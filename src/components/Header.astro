---
interface Props {
    links?: Array<{
        text: string;
        href: string;
    }>;
    ctaText?: string;
}

const {
    links = [
        { text: 'De Ce Noi', href: '#benefits' },
        { text: 'Avantaje', href: '#advantages' },
        { text: 'Capabilități', href: '#capabilities' },
        { text: 'Contact', href: '#contact' }
    ],
    ctaText = 'Solicită Demo'
} = Astro.props;
---

<nav id="navbar">
    <div class="nav-container">
        <a href="/" class="logo-link">
            <span class="logo-symbol">α</span>
            <span class="logo-text">
                <span class="logo-alpha">ALPHA</span><span class="logo-separator">/</span><span class="logo-grade">GRADE</span>
            </span>
        </a>

        <button class="nav-mobile-toggle" id="mobile-toggle" aria-label="Toggle menu">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <div class="nav-links" id="nav-links">
            {links.map(link => (
                <a href={link.href} class="nav-link">{link.text}</a>
            ))}
            <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                <!-- Moon icon - shown in light mode -->
                <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
                <!-- Sun icon - shown in dark mode -->
                <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
            </button>
            <a href="javascript:void(0)" class="nav-cta" id="open-booking-modal">
                <span class="nav-cta-glow"></span>
                {ctaText}
            </a>
        </div>
    </div>
</nav>

<script>
    // Theme toggle functionality
    const themeToggle = document.getElementById('theme-toggle');

    // Get initial theme from localStorage or default to dark
    function getTheme() {
        const stored = localStorage.getItem('theme');
        if (stored) return stored;
        // Check system preference as fallback
        if (window.matchMedia('(prefers-color-scheme: light)').matches) {
            return 'light';
        }
        return 'dark'; // Default to dark
    }

    // Apply theme to document
    function applyTheme(theme: string) {
        if (theme === 'light') {
            document.documentElement.setAttribute('data-theme', 'light');
        } else {
            document.documentElement.removeAttribute('data-theme');
        }
        localStorage.setItem('theme', theme);
    }

    // Initialize theme on page load
    applyTheme(getTheme());

    // Toggle theme on button click
    themeToggle?.addEventListener('click', () => {
        const currentTheme = getTheme();
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        applyTheme(newTheme);
    });

    // Scroll effect
    const navbar = document.getElementById('navbar');
    window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
            navbar?.classList.add('scrolled');
        } else {
            navbar?.classList.remove('scrolled');
        }
    });

    // Mobile menu toggle
    const mobileToggle = document.getElementById('mobile-toggle');
    const navLinks = document.getElementById('nav-links');

    mobileToggle?.addEventListener('click', () => {
        navLinks?.classList.toggle('active');
    });

    // Close mobile menu on link click
    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', () => {
            navLinks?.classList.remove('active');
        });
    });

    // Open booking modal
    const openModalBtn = document.getElementById('open-booking-modal');
    openModalBtn?.addEventListener('click', () => {
        const modal = document.getElementById('booking-modal');
        modal?.classList.add('active');
        document.body.classList.add('modal-open');
    });
</script>

<style>
    .logo-link {
        display: flex;
        align-items: center;
        gap: 0.6rem;
        text-decoration: none;
    }

    .logo-symbol {
        font-family: 'Times New Roman', serif;
        font-size: 2rem;
        font-weight: 400;
        font-style: italic;
        background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        line-height: 1;
    }

    .logo-text {
        font-family: 'Orbitron', 'Space Grotesk', sans-serif;
        font-size: 1.1rem;
        font-weight: 700;
        letter-spacing: 0.08em;
        display: flex;
        align-items: center;
    }

    .logo-alpha {
        color: var(--text-primary);
    }

    .logo-separator {
        color: var(--text-muted);
        margin: 0 0.1rem;
        font-weight: 400;
    }

    .logo-grade {
        background: linear-gradient(135deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    @media (max-width: 900px) {
        .logo-symbol {
            font-size: 1.6rem;
        }

        .logo-text {
            font-size: 0.9rem;
        }
    }
</style>
